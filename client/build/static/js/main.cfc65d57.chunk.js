(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(t,i,e){},21:function(t,i,e){},23:function(t,i,e){},24:function(t,i,e){"use strict";e.r(i);var s=e(4),o=e(3),n=e(12),h=e.n(n),a=(e(20),e(21),e(0)),r=e(1),c=e(9),d=e(2),u=e(10),v=e(8),l=function(){function t(i,e){Object(a.a)(this,t),this.x=void 0,this.y=void 0,this.x=i,this.y=e}return Object(r.a)(t,[{key:"add",value:function(i){return new t(this.x+i.x,this.y+i.y)}},{key:"sub",value:function(i){return new t(this.x-i.x,this.y-i.y)}},{key:"rotate",value:function(i){return new t(this.x*Math.cos(i)-this.y*Math.sin(i),this.x*Math.sin(i)+this.y*Math.cos(i))}},{key:"toString",value:function(t){return"".concat(this.x.toFixed(t),",\n").concat(this.y.toFixed(t))}}]),t}(),p=e(6),f=function(){function t(i,e,s){Object(a.a)(this,t),this.position=void 0,this.rotation=void 0,this.size=void 0,this.position=i,this.rotation=e,this.size=s}return Object(r.a)(t,[{key:"getVertexes",value:function(){var t=this.size.w/2,i=this.size.h/2;return[new l(-t,-i).rotate(this.rotation).add(this.position),new l(t,-i).rotate(this.rotation).add(this.position),new l(-t,i).rotate(this.rotation).add(this.position),new l(t,i).rotate(this.rotation).add(this.position)]}},{key:"getBound",value:function(){var t=this.getVertexes(),i=t.map((function(t){return t.y})),e=t.map((function(t){return t.x}));return{top:Math.min.apply(Math,Object(p.a)(i)),right:Math.max.apply(Math,Object(p.a)(e)),bottom:Math.max.apply(Math,Object(p.a)(i)),left:Math.min.apply(Math,Object(p.a)(e))}}}]),t}(),w=function(){function t(i,e,s,o){Object(a.a)(this,t),this.p5=void 0,this.id=void 0,this.radius=void 0,this.position=void 0,this.rotation=void 0,this.speed=void 0,this.isHit=!1,this.p5=i,this.id=e,this.radius=5,this.position=new l(s.x,s.y),this.rotation=o,this.speed=10}return Object(r.a)(t,[{key:"draw",value:function(){var t=this.p5,i=new l(this.speed*Math.cos(this.rotation),this.speed*Math.sin(this.rotation));this.position=this.position.add(i),t.circle(this.position.x,this.position.y,this.radius)}}]),t}(),y=function t(i,e){Object(a.a)(this,t),this.w=void 0,this.h=void 0,this.w=i,this.h=e},b=function(){function t(i,e){Object(a.a)(this,t),this.center=void 0,this.radius=void 0,this.center=i,this.radius=e}return Object(r.a)(t,[{key:"getBound",value:function(){return{top:this.center.y-this.radius,right:this.center.x+this.radius,bottom:this.center.y+this.radius,left:this.center.x-this.radius}}}]),t}(),m=e(14),g=function(t,i){var e=t.getBound(),s=i.getBound();return e.top>=s.top&&e.right<=s.right&&e.bottom<=s.bottom&&e.left>=s.left},M=function(t,i,e){return Math.abs(i.x*t.y-t.x*i.y+(e.x*i.y-i.x*e.y)+(t.x*e.y-e.x*t.y))/2},x=function(){function t(i,e,s,o){Object(a.a)(this,t),this.p5=void 0,this.config=void 0,this.size=void 0,this.halfSize=void 0,this.position=void 0,this.rotation=void 0,this.speedMove=void 0,this.speedRotate=void 0,this.speedBullet=void 0,this.body=void 0,this.battleField=void 0,this.id=void 0,this.bullets=void 0,this.allowFire=!0,this.debug=void 0,this.isLive=!0,this.p5=i,this.config=e,this.size={w:48,h:32},this.halfSize={w:this.size.w/2,h:this.size.h/2},o?(this.position=o.position,this.rotation=o.rotation):(this.position=new l(50,this.config.height-80),this.rotation=0),this.speedMove=2,this.speedRotate=i.PI/40,this.speedBullet=5,this.body=new f(this.position,this.rotation,this.size),this.battleField=new f(new l(e.width/2,e.height/2),0,new y(e.width,e.height)),this.id=s,this.bullets=[],this.debug=!1}return Object(r.a)(t,[{key:"draw",value:function(){var t=this.p5;t.textSize(12),t.push(),t.fill(255,255,255),t.translate(this.position.x,this.position.y),t.rotate(this.rotation),t.rect(-this.halfSize.w,-this.halfSize.h,this.size.w,this.size.h,5),t.rect(0,-this.halfSize.h/4,this.size.w,this.halfSize.h/2),t.pop(),t.fill(255,255,0),this.drawBullets(),t.fill(0,0,255),this.debug&&this.debugInfo()}},{key:"debugInfo",value:function(){var t=this.p5;new f(this.position,this.rotation,this.size).getVertexes().forEach((function(i){t.text(i.toString(1),i.x,i.y)}))}},{key:"drawBullets",value:function(){var t=this;this.bullets.forEach((function(t){t.draw()})),this.bullets=this.bullets.filter((function(i){return function(t,i){var e=t.getBound(),s=i.getBound();return e.top>=s.top&&e.right<=s.right&&e.bottom<=s.bottom&&e.left>=s.left}(new b(i.position,i.radius),t.battleField)}))}}]),t}(),k=function(t){Object(u.a)(e,t);var i=Object(v.a)(e);function e(){return Object(a.a)(this,e),i.apply(this,arguments)}return Object(r.a)(e,[{key:"draw",value:function(){var t=this,i=this.p5,s=this.rotation,o=new l(this.position.x,this.position.y);i.keyIsDown(65)&&(s-=this.speedRotate),i.keyIsDown(68)&&(s+=this.speedRotate),s%=2*i.PI;var n=0;i.keyIsDown(87)&&(n=this.speedMove),i.keyIsDown(83)&&(n=-this.speedMove),s%=2*i.PI;var h=new l(n*Math.cos(s),n*Math.sin(s));o=o.add(h);var a=new f(o,s,this.size);if(g(a,this.battleField)&&(this.position=o,this.rotation=s,this.body=a),i.keyIsDown(32)&&this.allowFire){this.allowFire=!1;var r=new l(this.size.w*Math.cos(this.rotation),this.size.w*Math.sin(this.rotation));this.bullets.push(new w(this.p5,this.id,this.position.add(r),this.rotation))}i.keyReleased=function(){32==i.keyCode&&(t.allowFire=!0)},this.p5.stroke(255,0,0),Object(c.a)(Object(d.a)(e.prototype),"draw",this).call(this)}}]),e}(x),j=function(t){Object(u.a)(e,t);var i=Object(v.a)(e);function e(t,s,o,n){var h;return Object(a.a)(this,e),(h=i.call(this,t,s,o,n)).lastMoveTime=void 0,h.minMoveTime=void 0,h.move=void 0,h.speedMove=1,h.speedRotate=t.PI/80,h.speedBullet=2.5,h.lastMoveTime=Date.now(),h.minMoveTime=3e3,h.move={forward:0,rotation:0},h}return Object(r.a)(e,[{key:"draw",value:function(){this.randomMove(),this.p5.stroke(0,0,255),Object(c.a)(Object(d.a)(e.prototype),"draw",this).call(this)}},{key:"randomMove",value:function(){var t=this.p5,i=Date.now();i<this.lastMoveTime+this.minMoveTime||(this.lastMoveTime=i,this.move.forward=Math.floor(10*Math.random()),this.move.rotation=Math.floor(10*Math.random()));var e=0;e=this.move.forward<=1?0:this.move.forward<=3?-this.speedMove:this.speedMove;var s=this.rotation;this.move.rotation<=1?s-=this.speedRotate:this.move.rotation<=3&&(s+=this.speedRotate),s%=2*t.PI;var o=new l(e*Math.cos(s),e*Math.sin(s)),n=new l(this.position.x,this.position.y);n=n.add(o);var h=new f(n,s,this.size);g(h,this.battleField)&&(this.position=n,this.rotation=s,this.body=h)}}]),e}(x),O=e(13),z=e.n(O),I=function(){function t(i){var e=this;Object(a.a)(this,t),this.config=void 0,this.p5=void 0,this.sketch=void 0,this.player=void 0,this.enemies=void 0,this.canvas=void 0,this.score=void 0,this.config=i,this.p5=new z.a((function(t){t.setup=function(){e.setupGame(t)},t.draw=function(){e.runGame()}})),this.player=new k(this.p5,i,"player",this.getRandTankStatus()),this.enemies=[],this.score=0}return Object(r.a)(t,[{key:"setupGame",value:function(t){this.sketch=t;var i=document.querySelector("#".concat(this.config.canvasParentId," canvas"));i&&i.remove(),this.canvas=t.createCanvas(this.config.width,this.config.height),this.canvas.parent(this.config.canvasParentId)}},{key:"runGame",value:function(){this.sketch.background("#F3F3F3"),this.player.draw(),this.enemies.length<=4&&this.addEnemy(),this.enemies.forEach((function(t){t.draw()})),this.checkIfHit(),this.p5.textSize(32),this.p5.text("Score: ".concat(this.score),20,40)}},{key:"addEnemy",value:function(){var t=this.enemies.length;this.enemies.push(new j(this.p5,this.config,"robot".concat(t),this.getRandTankStatus()))}},{key:"getRandTankStatus",value:function(){return{position:new l(Math.random()*this.config.width,Math.random()*this.config.height),rotation:2*Math.random()*this.p5.PI}}},{key:"checkIfHit",value:function(){var t=this;this.player.bullets.forEach((function(i){if(!i.isHit){var e=new b(i.position,i.radius);t.enemies.forEach((function(s){(function(t,i){var e=i.getVertexes(),s=Object(m.a)(e,4),o=s[0],n=s[1],h=s[2],a=s[3],r=t.center,c=i.size.w*i.size.h;return M(o,n,r)+M(n,h,r)+M(h,a,r)+M(a,o,r)<=c})(e,s.body)&&s.isLive&&(t.score++,s.isLive=!1,i.isHit=!0)}))}})),this.enemies=this.enemies.filter((function(t){return t.isLive})),this.player.bullets=this.player.bullets.filter((function(t){return!t.isHit}))}}]),t}(),S=(e(23),function(){var t=Object(o.useRef)(null);return Object(o.useEffect)((function(){var i=window.innerWidth,e=window.innerHeight,s=t.current;s&&(s.style.width="".concat(i,"px"),s.style.height="".concat(e,"px")),new I({width:i,height:e,canvasParentId:"game-container"})}),[]),Object(s.jsx)("div",{id:"game-container",ref:t})});var F=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(S,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(Object(s.jsx)(F,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.cfc65d57.chunk.js.map